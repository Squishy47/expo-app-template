
# Get the list of changed files
changed_files=$(git diff --cached --name-only)

# Initialize flags for each workspace
website_changes=false
backend_changes=false
mobile_changes=false

# Check which directories have changes
for file in $changed_files; do
  case $file in
    projects/website/*) website_changes=true ;;
    projects/backend/*) backend_changes=true ;;
    projects/mobile-app/*) mobile_changes=true ;;
  esac
done

# Run lint only in directories with changes
if [ "$website_changes" = true ]; then
  echo "Running lint in website directory..."
  cd projects/website && bun run pre-commit || exit 1
fi

if [ "$backend_changes" = true ]; then
  echo "Running lint in backend directory..."
  cd projects/backend && bun run pre-commit || exit 1
fi

if [ "$mobile_changes" = true ]; then
  echo "Running lint in mobile-app directory..."
  cd projects/mobile-app && bun run pre-commit || exit 1
fi
